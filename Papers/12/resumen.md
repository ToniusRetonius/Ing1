# Method Object Pattern
## Smalltalk Best Practices Patterns - Kent Beck
En ocasiones, dentro del desarrollo de sistemas complejos, surgen métodos cuyo comportamiento central es complicado y difícil de simplificar mediante el patrón Composed Method. Estos métodos, que inicialmente pueden parecer simples, crecen progresivamente en líneas de código, parámetros y variables temporales hasta convertirse en estructuras difíciles de entender y mantener. El intento de aplicar Composed Method a estos métodos resulta ineficaz, ya que las distintas secciones del código suelen compartir una gran cantidad de variables. Cualquier fragmento extraído necesita múltiples parámetros —a veces seis u ocho— lo que termina por entorpecer la legibilidad y claridad del código, en lugar de mejorarla.

Ante esta situación, se recomienda emplear el patrón denominado Method Object. Este patrón consiste en crear una clase específica para representar una ejecución del método original. Esta clase encapsula tanto al receptor del mensaje como a sus argumentos y variables temporales, ahora convertidas en variables de instancia. Esta estructura permite que todas las partes del comportamiento complejo compartan un espacio de nombres común, facilitando así la posterior aplicación de Composed Method sin necesidad de pasar múltiples argumentos.

La implementación de este patrón sigue una secuencia clara. En primer lugar, se crea una clase con un nombre derivado del selector del método original. A esta clase se le asignan como variables de instancia: el receptor original del método, todos sus argumentos y sus variables temporales. Posteriormente, se define un método constructor que reciba el receptor y los argumentos del método original. Luego, se traslada el cuerpo del método a un nuevo método llamado compute, sustituyendo las referencias a los argumentos por las variables de instancia correspondientes y eliminando las declaraciones de variables temporales, ya que ahora forman parte del estado del objeto. Finalmente, el método original se reescribe para que cree una instancia de la nueva clase y le envíe el mensaje compute.

Este patrón, aunque no se usa frecuentemente, puede resultar crucial en casos específicos. El autor menciona que inicialmente no pensaba incluirlo en su recopilación de patrones, hasta que logró convencer a un cliente importante gracias a su aplicación. En la práctica, el uso del Method Object permitió reorganizar un método de 150 líneas, que no se dejaba dividir fácilmente, en una estructura más clara y mantenible. Luego de aplicar el patrón, no solo fue posible emplear Composed Method con eficacia, sino que se eliminaron variables innecesarias, el código se redujo a la mitad y se identificó y corrigió un error que pasaba desapercibido en la versión original.

En conclusión, el patrón Method Object ofrece una solución efectiva para simplificar métodos complejos que comparten múltiples variables, permitiendo mejorar la legibilidad y modularidad del código, y facilitando su mantenimiento, especialmente cuando otras técnicas de refactorización resultan inadecuadas.